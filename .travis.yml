os: osx
osx_image: xcode9.4

language: c

compiler:
  - clang
  - gcc

addons:
  homebrew:
    packages:
      - pkg-config
      - freetype
      - jpeg
      - libpng
      - libtiff
      - libtool
      - little-cms2
      - openjpeg
      - webp
      - xz

script: |
  set -e
  set -x
  export CFLAGS="-Wno-deprecated-declarations -Wdeclaration-after-statement -Wno-error=unused-variable"
  ./configure --enable-osx-universal-binary=no --disable-dpenency-tracking --disable-silent-rules --enable-static --disable-shared --without-perl --disable-opencl --disable-openmp --with-freetype=yes --with-modules --with-webp=yes --with-openjp2 --without-gslib --without-fftw --without-pango --without-x --without-wmf --with-quantum-depth=16 --enable-delegate-build --prefix='/usr/local/bin' --with-raw=yes
  make

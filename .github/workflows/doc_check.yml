name: Documentation Check for Magick++

on:
  push:
    branches:
      - main
    paths:
        - '.github/workflows/doc_check.yml'
  workflow_dispatch:
  schedule:
    - cron: 0 6 * * *

jobs:
  doxygen-check:
    name: 'Documentation Check'
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
      with:
        fetch-depth: 2

    - name: Install Doxygen
      run: sudo apt-get install -y doxygen python3-pip && pip3 install pyarrow beautifulsoup4 pandas lxml

    - name: Compare documentation
      run: |
        bash scripts/check_docs.sh